{"meta":{"title":"ç«¥å¤§ä¾ çš„åšå®¢","subtitle":"å¤§ä¾  ğŸ¤","description":"è¿™æ˜¯ä¸€æ®µåšå®¢æè¿°çš„å­—æ®µ......","author":"Ashton","url":"https://tongwp.com","root":"/"},"pages":[{"title":"ä»‹ç»é¡µ","date":"2021-04-29T15:36:43.000Z","updated":"2021-05-07T10:15:21.192Z","comments":true,"path":"about/index.html","permalink":"https://tongwp.com/about/index.html","excerpt":"","text":"ç¯©é¸å‡ºå„ç¨®æƒ³æ³•ï¼Œå°‡èƒ½å¤ åšåˆ°çš„äº‹åŒ–ç‚ºè¡Œå‹•å¾Œï¼Œå¤§å¤šæ•¸çš„äº‹æƒ…éƒ½èƒ½å¤ å…·é«”å¯¦ç¾ã€‚ä½†é€™ä¸¦ä¸æ˜¯çµ‚é»è€Œæ˜¯èµ·é»ã€‚ç¸½ä¹‹ï¼Œå…ˆæŠŠäº‹æƒ…å®Œæˆï¼Œå†ä¾†æƒ³æƒ³æœ‰ä»€éº½è¾¦æ³•èƒ½å¤ è®“æƒ…æ³æ›´å®Œç¾ï¼Œäº‹æƒ…ä¸æ˜¯åœ¨ã€å®Œæˆã€‘é‚£ç¬é–“å°±çµæŸï¼Œæˆ‘å€‘æ‡‰è©²æ›´åŸ·è‘—æ–¼ã€æ€æ¨£åšæœƒæ›´å¥½ã€‘ã€‚è€Œã€ç¯©é¸æƒ³æ³•ã€‘å°±æ˜¯æŒæ¡é€²æ­¥çš„é—œéµã€‚"},{"title":"åˆ†ç±»é¡µ","date":"2021-04-29T07:34:28.000Z","updated":"2021-05-06T07:44:23.627Z","comments":false,"path":"categories/index.html","permalink":"https://tongwp.com/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾é¡µ","date":"2021-04-29T07:31:08.000Z","updated":"2021-05-06T07:44:19.783Z","comments":true,"path":"tags/index.html","permalink":"https://tongwp.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"React Fiber","slug":"react-fiber","date":"2021-05-11T02:19:47.000Z","updated":"2021-05-11T02:24:15.202Z","comments":true,"path":"2021/05/11/react-fiber/","link":"","permalink":"https://tongwp.com/2021/05/11/react-fiber/","excerpt":"Reactç°åœ¨çš„æ¸²æŸ“éƒ½æ˜¯ç”±Fiberæ¥è°ƒåº¦ Fiberè°ƒåº¦è¿‡ç¨‹ä¸­çš„ä¸¤ä¸ªé˜¶æ®µ(ä»¥Renderä¸ºç•Œ) äº§ç”ŸåŸå›  Fiberä¹‹å‰çš„reconcilerï¼ˆè¢«ç§°ä¸º Stack reconciler ï¼‰è‡ªé¡¶å‘ä¸‹çš„é€’å½’mount/updateï¼Œæ— æ³•ä¸­æ–­ï¼ˆæŒç»­å ç”¨ä¸»çº¿ç¨‹ï¼‰ï¼Œè¿™æ ·ä¸»çº¿ç¨‹ä¸Šçš„å¸ƒå±€ã€åŠ¨ç”»ç­‰å‘¨æœŸæ€§ä»»åŠ¡ä»¥åŠäº¤äº’å“åº”å°±æ— æ³•ç«‹å³å¾—åˆ°å¤„ç†ï¼Œå½±å“ä½“éªŒ æ¸²æŸ“è¿‡ç¨‹ä¸­æ²¡æœ‰ä¼˜å…ˆçº§ React Fiberçš„æ–¹å¼ æŠŠä¸€ä¸ªè€—æ—¶é•¿çš„ä»»åŠ¡åˆ†æˆå¾ˆå¤šå°ç‰‡ï¼Œæ¯ä¸€ä¸ªå°ç‰‡çš„è¿è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œè™½ç„¶æ€»æ—¶é—´ä¾ç„¶å¾ˆé•¿ï¼Œä½†æ˜¯åœ¨æ¯ä¸ªå°ç‰‡æ‰§è¡Œå®Œä¹‹åï¼Œéƒ½ç»™å…¶ä»–ä»»åŠ¡ä¸€ä¸ªæ‰§è¡Œçš„æœºä¼šï¼Œè¿™æ ·å”¯ä¸€çš„çº¿ç¨‹å°±ä¸ä¼šè¢«ç‹¬å ï¼Œå…¶ä»–ä»»åŠ¡ä¾ç„¶æœ‰è¿è¡Œçš„æœºä¼š React FiberæŠŠæ›´æ–°è¿‡ç¨‹ç¢ç‰‡åŒ–ï¼Œæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹é¢çš„å›¾æ‰€ç¤ºï¼Œæ¯æ‰§è¡Œå®Œä¸€æ®µæ›´æ–°è¿‡ç¨‹ï¼Œå°±æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™Reactè´Ÿè´£ä»»åŠ¡åè°ƒçš„æ¨¡å—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–ç´§æ€¥ä»»åŠ¡è¦åšï¼Œå¦‚æœæ²¡æœ‰å°±ç»§ç»­å»æ›´æ–°ï¼Œå¦‚æœæœ‰ç´§æ€¥ä»»åŠ¡ï¼Œé‚£å°±å»åšç´§æ€¥ä»»åŠ¡ã€‚","text":"Reactç°åœ¨çš„æ¸²æŸ“éƒ½æ˜¯ç”±Fiberæ¥è°ƒåº¦ Fiberè°ƒåº¦è¿‡ç¨‹ä¸­çš„ä¸¤ä¸ªé˜¶æ®µ(ä»¥Renderä¸ºç•Œ) äº§ç”ŸåŸå›  Fiberä¹‹å‰çš„reconcilerï¼ˆè¢«ç§°ä¸º Stack reconciler ï¼‰è‡ªé¡¶å‘ä¸‹çš„é€’å½’mount/updateï¼Œæ— æ³•ä¸­æ–­ï¼ˆæŒç»­å ç”¨ä¸»çº¿ç¨‹ï¼‰ï¼Œè¿™æ ·ä¸»çº¿ç¨‹ä¸Šçš„å¸ƒå±€ã€åŠ¨ç”»ç­‰å‘¨æœŸæ€§ä»»åŠ¡ä»¥åŠäº¤äº’å“åº”å°±æ— æ³•ç«‹å³å¾—åˆ°å¤„ç†ï¼Œå½±å“ä½“éªŒ æ¸²æŸ“è¿‡ç¨‹ä¸­æ²¡æœ‰ä¼˜å…ˆçº§ React Fiberçš„æ–¹å¼ æŠŠä¸€ä¸ªè€—æ—¶é•¿çš„ä»»åŠ¡åˆ†æˆå¾ˆå¤šå°ç‰‡ï¼Œæ¯ä¸€ä¸ªå°ç‰‡çš„è¿è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œè™½ç„¶æ€»æ—¶é—´ä¾ç„¶å¾ˆé•¿ï¼Œä½†æ˜¯åœ¨æ¯ä¸ªå°ç‰‡æ‰§è¡Œå®Œä¹‹åï¼Œéƒ½ç»™å…¶ä»–ä»»åŠ¡ä¸€ä¸ªæ‰§è¡Œçš„æœºä¼šï¼Œè¿™æ ·å”¯ä¸€çš„çº¿ç¨‹å°±ä¸ä¼šè¢«ç‹¬å ï¼Œå…¶ä»–ä»»åŠ¡ä¾ç„¶æœ‰è¿è¡Œçš„æœºä¼š React FiberæŠŠæ›´æ–°è¿‡ç¨‹ç¢ç‰‡åŒ–ï¼Œæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹é¢çš„å›¾æ‰€ç¤ºï¼Œæ¯æ‰§è¡Œå®Œä¸€æ®µæ›´æ–°è¿‡ç¨‹ï¼Œå°±æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™Reactè´Ÿè´£ä»»åŠ¡åè°ƒçš„æ¨¡å—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–ç´§æ€¥ä»»åŠ¡è¦åšï¼Œå¦‚æœæ²¡æœ‰å°±ç»§ç»­å»æ›´æ–°ï¼Œå¦‚æœæœ‰ç´§æ€¥ä»»åŠ¡ï¼Œé‚£å°±å»åšç´§æ€¥ä»»åŠ¡ã€‚ ç»´æŠ¤æ¯ä¸€ä¸ªåˆ†ç‰‡çš„æ•°æ®ç»“æ„ï¼Œå°±æ˜¯Fiberã€‚ Fiberçš„è°ƒåº¦è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªé˜¶æ®µï¼š render/reconciliationé˜¶æ®µ ===&gt; é‡Œé¢çš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½å¯èƒ½è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œæ‰€ä»¥å°½é‡ä¿è¯çŠ¶æ€ä¸å˜ componentWillMount componentWillReceiveProps shouldComponentUpdate componentWillUpdate Commité˜¶æ®µ ===&gt; ä¸èƒ½è¢«æ‰“æ–­ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ componentDidMount componentDidUpdate compoenntWillunmount æ€»ç»“ï¼šæ–°çš„Fiber åˆ†ç‰‡å¤„ç†ä»»åŠ¡ï¼Œå½“æœ‰ç´§æ€¥ä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥å»ä¼˜å…ˆå¤„ç†ç´§æ€¥ä»»åŠ¡ç„¶åå†å›æ¥è°ƒç”¨","categories":[{"name":"Jsç¬”è®°","slug":"Jsç¬”è®°","permalink":"https://tongwp.com/categories/Js%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"react","slug":"react","permalink":"https://tongwp.com/tags/react/"}]},{"title":"ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«","slug":"react-class-fc","date":"2021-05-11T02:18:17.000Z","updated":"2021-05-11T02:24:21.840Z","comments":true,"path":"2021/05/11/react-class-fc/","link":"","permalink":"https://tongwp.com/2021/05/11/react-class-fc/","excerpt":"å‡è®¾Greetingç»„ä»¶ï¼Œå®ƒæ”¯æŒå®šä¹‰æˆç±»å’Œå‡½æ•°ä¸¤ç§æ€§è´¨ã€‚å¦‚æœ Greeting æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReact éœ€è¦è°ƒç”¨å®ƒã€‚ 123456// Greeting.jsfunction Greeting() &#123; return &lt;p&gt;Hello&lt;/p&gt;;&#125;// React å†…éƒ¨const result = Greeting(props); // &lt;p&gt;Hello&lt;/p&gt;","text":"å‡è®¾Greetingç»„ä»¶ï¼Œå®ƒæ”¯æŒå®šä¹‰æˆç±»å’Œå‡½æ•°ä¸¤ç§æ€§è´¨ã€‚å¦‚æœ Greeting æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReact éœ€è¦è°ƒç”¨å®ƒã€‚ 123456// Greeting.jsfunction Greeting() &#123; return &lt;p&gt;Hello&lt;/p&gt;;&#125;// React å†…éƒ¨const result = Greeting(props); // &lt;p&gt;Hello&lt;/p&gt; å¦‚æœ Greeting æ˜¯ä¸€ä¸ªç±»ï¼ŒReact éœ€è¦å…ˆå°†å…¶å®ä¾‹åŒ–ï¼Œå†è°ƒç”¨åˆšæ‰ç”Ÿæˆå®ä¾‹çš„ render æ–¹æ³• 123456789// Greeting.jsclass Greeting extends React.Component &#123; render() &#123; return &lt;p&gt;Hello&lt;/p&gt;; &#125;&#125;// React å†…éƒ¨const instance = new Greeting(props); // Greeting &#123;&#125;const result = instance.render(); // &lt;p&gt;Hello&lt;/p&gt; Reacté€šè¿‡ä¸‹é¢æ–¹å¼æ¥åˆ¤æ–­ç»„ä»¶çš„ç±»å‹ï¼š123456// React å†…éƒ¨class Component &#123;&#125;Component.prototype.isReactComponent = &#123;&#125;;// æ£€æŸ¥æ–¹å¼class Greeting extends React.Component &#123;&#125;console.log(Greeting.prototype.isReactComponent); // &#123;&#125;","categories":[{"name":"Jsç¬”è®°","slug":"Jsç¬”è®°","permalink":"https://tongwp.com/categories/Js%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"react","slug":"react","permalink":"https://tongwp.com/tags/react/"}]},{"title":"promiseåŸºç¡€ç”¨æ³•","slug":"promise","date":"2021-05-07T10:02:55.000Z","updated":"2021-05-07T10:21:53.511Z","comments":true,"path":"2021/05/07/promise/","link":"","permalink":"https://tongwp.com/2021/05/07/promise/","excerpt":"Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š ä»è¯­æ³•ä¸Šè®²ï¼Œpromiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ï¼›ä»æœ¬æ„ä¸Šè®²ï¼Œå®ƒæ˜¯æ‰¿è¯ºï¼Œæ‰¿è¯ºå®ƒè¿‡ä¸€æ®µæ—¶é—´ä¼šç»™ä½ ä¸€ä¸ªç»“æœã€‚ promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼špending( ç­‰å¾…æ€ )ï¼Œfulfiled( æˆåŠŸæ€ )ï¼Œrejected( å¤±è´¥æ€ ) çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ã€‚åˆ›é€ promiseå®ä¾‹åï¼Œå®ƒä¼šç«‹å³æ‰§è¡Œã€‚ promiseæ˜¯ç”¨æ¥è§£å†³ä¸¤ä¸ªé—®é¢˜çš„ï¼š å›è°ƒåœ°ç‹±ï¼Œä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œ å¸¸å¸¸ç¬¬ä¸€ä¸ªçš„å‡½æ•°çš„è¾“å‡ºæ˜¯ç¬¬äºŒä¸ªå‡½æ•°çš„è¾“å…¥è¿™ç§ç°è±¡ promiseå¯ä»¥æ”¯æŒå¤šä¸ªå¹¶å‘çš„è¯·æ±‚ï¼Œè·å–å¹¶å‘è¯·æ±‚ä¸­çš„æ•°æ® promiseå¯ä»¥è§£å†³å¼‚æ­¥çš„é—®é¢˜ï¼Œæœ¬èº«ä¸èƒ½è¯´promiseæ˜¯å¼‚æ­¥çš„","text":"Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š ä»è¯­æ³•ä¸Šè®²ï¼Œpromiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ï¼›ä»æœ¬æ„ä¸Šè®²ï¼Œå®ƒæ˜¯æ‰¿è¯ºï¼Œæ‰¿è¯ºå®ƒè¿‡ä¸€æ®µæ—¶é—´ä¼šç»™ä½ ä¸€ä¸ªç»“æœã€‚ promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼špending( ç­‰å¾…æ€ )ï¼Œfulfiled( æˆåŠŸæ€ )ï¼Œrejected( å¤±è´¥æ€ ) çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ã€‚åˆ›é€ promiseå®ä¾‹åï¼Œå®ƒä¼šç«‹å³æ‰§è¡Œã€‚ promiseæ˜¯ç”¨æ¥è§£å†³ä¸¤ä¸ªé—®é¢˜çš„ï¼š å›è°ƒåœ°ç‹±ï¼Œä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œ å¸¸å¸¸ç¬¬ä¸€ä¸ªçš„å‡½æ•°çš„è¾“å‡ºæ˜¯ç¬¬äºŒä¸ªå‡½æ•°çš„è¾“å…¥è¿™ç§ç°è±¡ promiseå¯ä»¥æ”¯æŒå¤šä¸ªå¹¶å‘çš„è¯·æ±‚ï¼Œè·å–å¹¶å‘è¯·æ±‚ä¸­çš„æ•°æ® promiseå¯ä»¥è§£å†³å¼‚æ­¥çš„é—®é¢˜ï¼Œæœ¬èº«ä¸èƒ½è¯´promiseæ˜¯å¼‚æ­¥çš„ Promise.prototype.then()å’ŒPromise.prototype.catch()resolveå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» pending å˜ä¸º resolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå» rejectå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» pending å˜ä¸º rejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚ Promiseå®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨thenæ–¹æ³•åˆ†åˆ«æŒ‡å®šresolvedçŠ¶æ€å’ŒrejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨then()æ–¹æ³•é‡Œé¢å®šä¹‰ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨catchæ–¹æ³•ã€‚ 12345678910111213// ä¸å»ºè®®è¿™ä¹ˆä½¿ç”¨promise.then(function(data) &#123; // success&#125;, function(err) &#123; // error&#125;);// goodpromise.then(function(data) &#123; //cb // success&#125;).catch(function(err) &#123; // error&#125;); ç¬¬äºŒç§å†™æ³•å¯ä»¥æ•è·å‰é¢thenæ–¹æ³•æ‰§è¡Œä¸­çš„é”™è¯¯ï¼Œä¹Ÿæ›´æ¥è¿‘åŒæ­¥çš„å†™æ³•ï¼ˆtry/catchï¼‰ã€‚ Promise.prototype.finally()finally()æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚è¯¥æ–¹æ³•æ˜¯ ES2018 å¼•å…¥æ ‡å‡†çš„ã€‚ 1234567promise.then(result =&gt; &#123; ...&#125;).catch(error =&gt; &#123; ...&#125;).finally(() =&gt; &#123; ...&#125;); ä¸Šé¢ä»£ç ä¸­ï¼Œä¸ç®¡promiseæœ€åçš„çŠ¶æ€ï¼Œåœ¨æ‰§è¡Œå®Œthenæˆ–catchæŒ‡å®šçš„å›è°ƒå‡½æ•°ä»¥åï¼Œéƒ½ä¼šæ‰§è¡Œfinallyæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚finallyæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äº Promise çš„æ‰§è¡Œç»“æœã€‚finallyæ–¹æ³•æ€»æ˜¯ä¼šè¿”å›åŸæ¥çš„å€¼ã€‚ Promise.all()Promise.all()æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚ 12345const p = Promise.all([p1, p2, p3]);// pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚// åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚// åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectedï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectedï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚ Promise.all()æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹ã€‚ Promise.race()Promise.race()æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚ 12const p = Promise.race([p1, p2, p3]);// ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚ Promise.race()æ–¹æ³•çš„å‚æ•°ä¸Promise.all()æ–¹æ³•ä¸€æ ·ï¼Œå¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolve()æ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚ Promise.allSettled()Promise.allSettled()æ–¹æ³•æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚åªæœ‰ç­‰åˆ°æ‰€æœ‰è¿™äº›å‚æ•°å®ä¾‹éƒ½è¿”å›ç»“æœï¼Œä¸ç®¡æ˜¯fulfilledè¿˜æ˜¯rejectedï¼ŒåŒ…è£…å®ä¾‹æ‰ä¼šç»“æŸã€‚è¯¥æ–¹æ³•ç”± ES2020 å¼•å…¥ã€‚ 12345678const promises = [ fetch(&#x27;/api-1&#x27;), fetch(&#x27;/api-2&#x27;), fetch(&#x27;/api-3&#x27;),];await Promise.allSettled(promises);removeLoadingIndicator();//å¯¹æœåŠ¡å™¨å‘å‡ºä¸‰ä¸ªè¯·æ±‚ï¼Œç­‰åˆ°ä¸‰ä¸ªè¯·æ±‚éƒ½ç»“æŸï¼Œä¸ç®¡è¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼ŒåŠ è½½çš„æ»šåŠ¨å›¾æ ‡å°±ä¼šæ¶ˆå¤±ã€‚ Promise.allSettled()çš„è¿”å›å€¼allSettledPromiseï¼ŒçŠ¶æ€åªå¯èƒ½å˜æˆfulfilledã€‚å®ƒçš„ç›‘å¬å‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•°æ˜¯æ•°ç»„resultsã€‚è¯¥æ•°ç»„çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”ä¼ å…¥Promise.allSettled()çš„ä¸¤ä¸ª Promise å®ä¾‹ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰statuså±æ€§ï¼Œè¯¥å±æ€§çš„å€¼åªå¯èƒ½æ˜¯å­—ç¬¦ä¸²fulfilledæˆ–å­—ç¬¦ä¸²rejectedã€‚fulfilledæ—¶ï¼Œå¯¹è±¡æœ‰valueå±æ€§ï¼Œrejectedæ—¶æœ‰reasonå±æ€§ï¼Œå¯¹åº”ä¸¤ç§çŠ¶æ€çš„è¿”å›å€¼ã€‚ 1234567891011121314151617181920const resolved = Promise.resolve(42);const rejected = Promise.reject(-1);const allSettledPromise = Promise.allSettled([resolved, rejected]);allSettledPromise.then(function (results) &#123; console.log(results);&#125;);// [// &#123; status: &#x27;fulfilled&#x27;, value: 42 &#125;,// &#123; status: &#x27;rejected&#x27;, reason: -1 &#125;// ]//-------------------------------ç”¨æ³•ä¾‹å­--------------------------------------const promises = [ fetch(&#x27;index.html&#x27;), fetch(&#x27;https://does-not-exist/&#x27;) ];const results = await Promise.allSettled(promises);// è¿‡æ»¤å‡ºæˆåŠŸçš„è¯·æ±‚const successfulPromises = results.filter(p =&gt; p.status === &#x27;fulfilled&#x27;);// è¿‡æ»¤å‡ºå¤±è´¥çš„è¯·æ±‚ï¼Œå¹¶è¾“å‡ºåŸå› const errors = results .filter(p =&gt; p.status === &#x27;rejected&#x27;) .map(p =&gt; p.reason); æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œåªå…³å¿ƒè¿™äº›æ“ä½œæœ‰æ²¡æœ‰ç»“æŸã€‚è¿™æ—¶ï¼ŒPromise.allSettled()æ–¹æ³•å°±å¾ˆæœ‰ç”¨ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæƒ³è¦ç¡®ä¿æ‰€æœ‰æ“ä½œéƒ½ç»“æŸï¼Œå°±å¾ˆéº»çƒ¦ã€‚Promise.all()æ–¹æ³•æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚ 123456789const urls = [ /* ... */ ];const requests = urls.map(x =&gt; fetch(x));try &#123; await Promise.all(requests); console.log(&#x27;æ‰€æœ‰è¯·æ±‚éƒ½æˆåŠŸã€‚&#x27;);&#125; catch &#123; console.log(&#x27;è‡³å°‘ä¸€ä¸ªè¯·æ±‚å¤±è´¥ï¼Œå…¶ä»–è¯·æ±‚å¯èƒ½è¿˜æ²¡ç»“æŸã€‚&#x27;);&#125; Promise.any()ES2021 å¼•å…¥äº†Promise.any()æ–¹æ³•ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹è¿”å›ã€‚åªè¦å‚æ•°å®ä¾‹æœ‰ä¸€ä¸ªå˜æˆfulfilledçŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆfulfilledçŠ¶æ€ï¼›å¦‚æœæ‰€æœ‰å‚æ•°å®ä¾‹éƒ½å˜æˆrejectedçŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆrejectedçŠ¶æ€ã€‚","categories":[{"name":"Jsç¬”è®°","slug":"Jsç¬”è®°","permalink":"https://tongwp.com/categories/Js%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://tongwp.com/tags/javascript/"}]},{"title":"Typeä¸InterfaceåŒºåˆ«","slug":"type_interface","date":"2021-05-07T09:46:55.000Z","updated":"2021-05-07T10:02:08.340Z","comments":true,"path":"2021/05/07/type_interface/","link":"","permalink":"https://tongwp.com/2021/05/07/type_interface/","excerpt":"Typeä¸InterfaceåŒºåˆ« å¯ä»¥åœ¨extendæˆ–Implementså­å¥ä¸­å‘½åæ¥å£ï¼Œä½†æ˜¯ä¸èƒ½ä¸ºå¯¹è±¡ç±»å‹æ–‡å­—æä¾›ç±»å‹åˆ«åã€‚ä¸€ä¸ªæ¥å£å¯ä»¥å…·æœ‰å¤šä¸ªåˆå¹¶çš„å£°æ˜ï¼Œä½†æ˜¯å¯¹è±¡ç±»å‹æ–‡å­—çš„ç±»å‹åˆ«åä¸èƒ½ã€‚ typeå¯ä»¥ç”¨äºå…¶å®ƒç±»å‹ï¼ˆè”åˆç±»å‹ã€å…ƒç»„ç±»å‹ã€åŸºæœ¬ç±»å‹[åŸå§‹å€¼]ï¼‰ï¼Œinterfaceä¸æ”¯æŒ","text":"Typeä¸InterfaceåŒºåˆ« å¯ä»¥åœ¨extendæˆ–Implementså­å¥ä¸­å‘½åæ¥å£ï¼Œä½†æ˜¯ä¸èƒ½ä¸ºå¯¹è±¡ç±»å‹æ–‡å­—æä¾›ç±»å‹åˆ«åã€‚ä¸€ä¸ªæ¥å£å¯ä»¥å…·æœ‰å¤šä¸ªåˆå¹¶çš„å£°æ˜ï¼Œä½†æ˜¯å¯¹è±¡ç±»å‹æ–‡å­—çš„ç±»å‹åˆ«åä¸èƒ½ã€‚ typeå¯ä»¥ç”¨äºå…¶å®ƒç±»å‹ï¼ˆè”åˆç±»å‹ã€å…ƒç»„ç±»å‹ã€åŸºæœ¬ç±»å‹[åŸå§‹å€¼]ï¼‰ï¼Œinterfaceä¸æ”¯æŒ Typeä¸åŒç‚¹1234567891011type PartialPointX = &#123; x: number &#125;;type PartialPointY = &#123; y: number &#125;;// union(è”åˆ)type PartialPoint = PartialPointX | PartialPointY;// tuple(å…ƒç¥–)type Data = [PartialPointX, PartialPointY];// primitive(åŸå§‹å€¼)type Name = Number;// typeofçš„è¿”å›å€¼let div = document.createElement(&#x27;div&#x27;);type B = typeof div; typeèƒ½ä½¿ç”¨inå…³é”®å­—ç”Ÿæˆæ˜ å°„ç±»å‹ï¼Œ ä½†interfaceä¸è¡Œ 12345678type Keys = &#x27;firstname&#x27; | &#x27;surname&#x27;type DudeType = &#123; [key in Keys]: string&#125;const test: DudeType = &#123; firstname: &#x27;Lee sin&#x27;, surname: &#x27;jinx&#x27;&#125; Interfaceä¸åŒç‚¹interfaceå¯ä»¥å¤šæ¬¡å®šä¹‰ï¼Œå¹¶è¢«è§†ä¸ºåˆå¹¶æ‰€æœ‰å£°æ˜æˆå‘˜ typeä¸æ”¯æŒ 1234567interface Point &#123; x: number;&#125;interface Point &#123; y: number;&#125;const point: Point = &#123;x: 1, y: 2&#125;; ç›¸åŒç‚¹ éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•° éƒ½å¯ä»¥è¿›è¡Œæ‹“å±•","categories":[{"name":"Jsç¬”è®°","slug":"Jsç¬”è®°","permalink":"https://tongwp.com/categories/Js%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://tongwp.com/tags/typescript/"}]}],"categories":[{"name":"Jsç¬”è®°","slug":"Jsç¬”è®°","permalink":"https://tongwp.com/categories/Js%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"react","slug":"react","permalink":"https://tongwp.com/tags/react/"},{"name":"javascript","slug":"javascript","permalink":"https://tongwp.com/tags/javascript/"},{"name":"typescript","slug":"typescript","permalink":"https://tongwp.com/tags/typescript/"}]}